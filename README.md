# KDB

- 协程 + Channel + 补偿式事务 是 XDB 精神在 Kotlin 上的完美移植

- 支持分布式事务

- 资源高利用率

## 实现

### 两种任务提交方式

- 提交单个玩家的操作 根据玩家创建channel 拿到消息 mutex 执行 没有竞争的时候 开销极低 就是串行
- 提交事务 需要排序 根据调用顺序 获取mutex 执行 有竞争的时候 协程挂起 开销也不大
- 都需要支持失败回滚(日志) 不管是出了意外 抛出异常 还是返回false了 根据日志回滚
- 定时异步入库(切换到专门的IO线程执行 阻塞协程) 完全封闭的内存管理 用户不需要关心内存 随拿随用

### 分布式事务
- 限流 熔断 降级 重试 TCC

###   

- Table 表缓存 AsyncSave
- Procedure
-

### 使用方法
- 

## TODO

- 集合类型 对象类型
- 优雅关闭
- 完善日志 完整的Log commit rollback
- ProcedureTask
- 死锁检测
- 注释